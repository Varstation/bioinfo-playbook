"use strict";(self.webpackChunkplaybook_website=self.webpackChunkplaybook_website||[]).push([[879],{3905:function(e,a,o){o.d(a,{Zo:function(){return p},kt:function(){return c}});var t=o(7294);function i(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function r(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,t)}return o}function n(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?r(Object(o),!0).forEach((function(a){i(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function s(e,a){if(null==e)return{};var o,t,i=function(e,a){if(null==e)return{};var o,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||(i[o]=e[o]);return i}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var l=t.createContext({}),d=function(e){var a=t.useContext(l),o=a;return e&&(o="function"==typeof e?e(a):n(n({},a),e)),o},p=function(e){var a=d(e.components);return t.createElement(l.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef((function(e,a){var o=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=d(o),c=i,b=u["".concat(l,".").concat(c)]||u[c]||m[c]||r;return o?t.createElement(b,n(n({ref:a},p),{},{components:o})):t.createElement(b,n({ref:a},p))}));function c(e,a){var o=arguments,i=a&&a.mdxType;if("string"==typeof e||i){var r=o.length,n=new Array(r);n[0]=u;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,n[1]=s;for(var d=2;d<r;d++)n[d]=o[d];return t.createElement.apply(null,n)}return t.createElement.apply(null,o)}u.displayName="MDXCreateElement"},1477:function(e,a,o){o.r(a),o.d(a,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return d},toc:function(){return p},default:function(){return u}});var t=o(7462),i=o(3366),r=(o(7294),o(3905)),n=["components"],s={sidebar_position:6},l="Criando a primeira release do pipeline",d={unversionedId:"guide-best-practices/release",id:"guide-best-practices/release",isDocsHomePage:!1,title:"Criando a primeira release do pipeline",description:'Os pipelines do Varstation s\xe3o semanticamente versionados, permitindo que voc\xea defina quando o pipeline est\xe1 pronto para uso em testes em produ\xe7\xe3o. Versionamento garante compatibilidade e notifica aos usu\xe1rios e sistemas que usam este pipeline quando eles devem atualizar devido a obter melhorias, ajustes ou consertos. Versionamento \xe9 muito comum na engenharia de software, e permite que usu\xe1rios possam reproduzir o c\xf3digo na mesma vers\xe3o quando o mesmo for considerado pelo time de desenvolvimento que o considere "pronto" para gerar uma vers\xe3o.',source:"@site/docs/guide-best-practices/release.md",sourceDirName:"guide-best-practices",slug:"/guide-best-practices/release",permalink:"/bioinfo-playbook/docs/guide-best-practices/release",editUrl:"https://github.com/varstation/bioinfo-playbook/edit/master/website/docs/guide-best-practices/release.md",version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Homologacao e monitoramento de testes do pipeline",permalink:"/bioinfo-playbook/docs/guide-best-practices/homologation"},next:{title:"Guia de Estilo",permalink:"/bioinfo-playbook/docs/guide-best-practices/style"}},p=[{value:"Checklist para Gera\xe7\xe3o de Release",id:"checklist-para-gera\xe7\xe3o-de-release",children:[]},{value:"Cria\xe7\xe3o do release candidate e deployment release para uso no Varstation",id:"cria\xe7\xe3o-do-release-candidate-e-deployment-release-para-uso-no-varstation",children:[{value:"Guidelines",id:"guidelines",children:[]}]},{value:"Cria\xe7\xe3o do deployment release zip para deploy no varstation",id:"cria\xe7\xe3o-do-deployment-release-zip-para-deploy-no-varstation",children:[]}],m={toc:p};function u(e){var a=e.components,s=(0,i.Z)(e,n);return(0,r.kt)("wrapper",(0,t.Z)({},m,s,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"criando-a-primeira-release-do-pipeline"},"Criando a primeira release do pipeline"),(0,r.kt)("p",null,'Os pipelines do Varstation s\xe3o semanticamente versionados, permitindo que voc\xea defina quando o pipeline est\xe1 pronto para uso em testes em produ\xe7\xe3o. Versionamento garante compatibilidade e notifica aos usu\xe1rios e sistemas que usam este pipeline quando eles devem atualizar devido a obter melhorias, ajustes ou consertos. Versionamento \xe9 muito comum na engenharia de software, e permite que usu\xe1rios possam reproduzir o c\xf3digo na mesma vers\xe3o quando o mesmo for considerado pelo time de desenvolvimento que o considere "pronto" para gerar uma vers\xe3o.'),(0,r.kt)("p",null,"Versionamento sem\xe2ntico utiliza a codifica\xe7\xe3o (major.minor.patch) e s\xe3o leg\xedveis por pessoas e d\xe3o uma vis\xe3o r\xe1pida aos desenvolvedores sobre compatibilidade, especialmente quando h\xe1 melhorias ap\xf3s a primeira vers\xe3o. Leia mais sobre o nosso tutorial de Versionamento sem\xe2ntico ",(0,r.kt)("a",{parentName:"p",href:"/bioinfo-playbook/docs/guide-best-practices/version"},"aqui"),"."),(0,r.kt)("p",null,"Todas as vers\xf5es geradas do pipelines s\xe3o empacotadas em releases e publicadas na p\xe1gina de releases do reposit\xf3rio do pipeline no Github (veja um exemplo ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Varstation/wdl-demo-pipeline/releases"},"aqui")," do pipeline de WDL-Germline-Demo). Toda release de um pipeline liberado no Github j\xe1 passou pelos testes de integra\xe7\xe3o (leia mais em ",(0,r.kt)("a",{parentName:"p",href:"/bioinfo-playbook/docs/guide-best-practices/homologation"},"Homologa\xe7\xe3o"),") e est\xe1 dispon\xedvel para ser usado em sistemas em produ\xe7\xe3o."),(0,r.kt)("h2",{id:"checklist-para-gera\xe7\xe3o-de-release"},"Checklist para Gera\xe7\xe3o de Release"),(0,r.kt)("ul",{className:"contains-task-list"},(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Congelamento do release candidate do pipeline de bioinform\xe1tica"),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Cria\xe7\xe3o do deployment release zip para deploy no varstation"),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Cria\xe7\xe3o da tag no github (versionamento sem\xe2ntico)"),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Build do Release Candidate no Varstation Producao"),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Comit\xea de GM para defini\xe7\xe3o da data de lan\xe7amento"),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Deploy da Release para ambiente produtivo"),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Testes no ambiente de valida\xe7\xe3o produtivo com 1 amostra de benchmark de bioinform\xe1tica")),(0,r.kt)("p",null,(0,r.kt)("img",{src:o(463).Z}),"\nFigura 18: Fluxo para release de pipelines no Varstation"),(0,r.kt)("p",null,"Em nosso pipeline de release constru\xedmos um ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Varstation/pipeline-template/blob/main/.github/workflows/rc.yml"},"script")," de continuous integration (CI) espec\xedfico que permite a partir de uma vers\xe3o publicada no github por meio de tags, uma inst\xe2ncia de processamento \xe9 invocada o qual realiza os procedimentos de cria\xe7\xe3o do deployment release zip para o release candidate e o release final quando aplicado e publica na \xe1rea de release do reposit\xf3rio Github do pipeline."),(0,r.kt)("h2",{id:"cria\xe7\xe3o-do-release-candidate-e-deployment-release-para-uso-no-varstation"},"Cria\xe7\xe3o do release candidate e deployment release para uso no Varstation"),(0,r.kt)("p",null,"Todos os pipelines versionados devem ter:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Um n\xfamero de versionamento de release no workflow principal principal. Este n\xfamero de vers\xe3o deve estar no formato ",(0,r.kt)("inlineCode",{parentName:"p"},"major.minor.patch"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Um Release Notes em arquivo (ver exemplo em ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Varstation/pipeline-template/blob/main/RELEASENOTES.md"},"RELEASENOTES.md"),") informando todas as altera\xe7\xf5es que foram adicionadas, modificadas ou removidas. Utilizamos o Guia do ",(0,r.kt)("a",{parentName:"p",href:"https://keepachangelog.com/en/1.0.0/"},"KeepChangeLog")," com alguns ajustes adaptados para nossa realidade, isto incluir a vers\xe3o, a data do lan\xe7amento da release e uma lista de bullets com as modifica\xe7\xf5es desde a \xfaltima release publicada."))),(0,r.kt)("h3",{id:"guidelines"},"Guidelines"),(0,r.kt)("p",null,"No Varstation, um pipeline muda de vers\xe3o quando \xe9 realizada quaisquer modifica\xe7\xf5es no workflow principal WDL ou em quaisquer depend\xeancias do workflow WDL. Se uma nova vers\xe3o for publicada, todas as altera\xe7\xf5es incluindo o novo n\xfamero da vers\xe3o precisam ser descritos no release notes do pipeline."),(0,r.kt)("p",null,"O versionamento do pipeline \xe9 atualizado seguindo os seguintes crit\xe9rios:"),(0,r.kt)("h4",{id:"altera\xe7\xf5es-de-alto-impacto-major"},"Altera\xe7\xf5es de alto impacto (Major)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Quaisquer altera\xe7\xf5es que resultem na modifica\xe7\xe3o da sa\xedda do pipeline, especialmente, as que indiquem que haver\xe1 necessidade a partir da sa\xedda deste pipeline reprocessar os dados."),(0,r.kt)("li",{parentName:"ul"},"Quaisquer altera\xe7\xf5es que incluam refactoring nas entradas ou sa\xeddas ou modifica\xe7\xf5es de formato de entrada e sa\xedda.")),(0,r.kt)("h4",{id:"altera\xe7\xf5es-de-menor-impacto-minor"},"Altera\xe7\xf5es de menor impacto (Minor)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Adi\xe7\xe3o de novos arquivos de sa\xedda que n\xe3o impactem ou alterem os arquivos de sa\xedda anteriores, por exemplo, adicionar um arquivo md5 checkum ou exportar as m\xe9tricas de qualidade."),(0,r.kt)("li",{parentName:"ul"},"Altera\xe7\xf5es no pipeline que n\xe3o alterem qualitativamente as sa\xeddas, mas que podem gerar sa\xeddas com pequenas mudan\xe7as (visuais ou de menor impacto) que n\xe3o exija um reprocessamento dos dados.")),(0,r.kt)("h4",{id:"altera\xe7\xf5es-de-conserto-ou-ajustes-pontuais-patch"},"Altera\xe7\xf5es de conserto ou ajustes pontuais (Patch)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Altera\xe7\xe3o nos arquivos de configura\xe7\xe3o (mem\xf3ria, CPU, etc), refactoring por troca de nome de vari\xe1vel ou refactoring de c\xf3digo, velocidade, otimiza\xe7\xe3o, coment\xe1rios, metadata."),(0,r.kt)("li",{parentName:"ul"},"Adi\xe7\xe3o de sa\xeddas opcionais.")),(0,r.kt)("h2",{id:"cria\xe7\xe3o-do-deployment-release-zip-para-deploy-no-varstation"},"Cria\xe7\xe3o do deployment release zip para deploy no varstation"),(0,r.kt)("p",null,"Quando um pipeline \xe9 promovido para release main e \xe9 submetido uma tag (e.g. 0.1.0 , 0.2.0-rc), uma release \xe9 publicada no modo rascunho contendo os seguintes componentes:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"A release contendo a vers\xe3o no formato Major.Minor.Patch-{rc} e release notes com as altera\xe7\xf5es realizadas nesta release."),(0,r.kt)("li",{parentName:"ol"},"Os artefatos incluindo o workflow principal em WDL, um zip contendo todas as depend\xeancias e quando aplic\xe1vel, o arquivo de options.")),(0,r.kt)("p",null,'Tamb\xe9m \xe9 lan\xe7ado antes de uma release final para cada vers\xe3o, uma release candidata com a tag "rc" que indica uma pre-release para que os desenvolvedores possam testar a integra\xe7\xe3o com futuras vers\xf5es do pipeline e j\xe1 validar de forma antecipada a nova vers\xe3o que est\xe1 para ser liberada.'))}u.isMDXComponent=!0},463:function(e,a,o){a.Z=o.p+"assets/images/release_pipeline-c430776789d8d576008e324d6dd351b5.png"}}]);